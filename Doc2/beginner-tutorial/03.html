<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="../js/jquery.min.js"></script>
    <link rel="stylesheet" href="../css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="../css/beginner.css"></link>    
    <style>
     
    </style>
    <title>TrackingCorrectorのBeginnerTutorial</title>
  </head>
  <body>
    <div class="container">
      <h1>UMATracker Manual</h1>
      <ul>
	<li><a href="../index.html">&gt;&gt;Document</a></li>
	<li><a href="../../index.html">&gt;&gt;UMATracker</a></li>
      </ul>
      <h2>TrackingCorrectorの使いかた</h2>
      <p class="lead">TrackingCorrectorでは、DetectCenterで出力した追跡軌道の修正を行う。トラッキングアルゴリズムを使っても、100%完璧な物体追跡は難しい。そこで、この工程で目視でトラッキングできているかを検査し、人力で修正を行う。</p>

      <h3>TrackingCorrector</h3>
      <div class="row">
	<div class="col-md-6">
	  <img src="../img/bt03/TrackingCorrector201512291832.png" alt="TrackingCorrector起動画面" width="100%"/>
	</div>
	<div class="col-md-6">
	  <ol>
	    <li><b>トラッキング結果</b></li>
	    <p class="lead">
	      トラッキングの結果を表示する。色の付いた丸が、現在のフレームでのその個体の位置座標を表している。円の周りに伸びている線は、その色の個体の軌跡。
	    </p>
	    
	    <li><b>拡大画面</b></li>
	    <p class="lead">
	      "トラッキング結果"の画面をドラッグし範囲指定することで"拡大画面"にはその範囲を拡大表示する。
	    </p>

	    <li><b>描画用パラメータ</b></li>
	    <p class="lead">
	      軌跡描画のためのパラメータ。"#of frames"の数値は、いくつの前後の何フレームの軌跡を描画するかを決定する。"Overlay"を設定すると、前のフレームの画像を透明にして描画する。"Radius"は位置座標のポイントの大きさ。"Line","Circle"軌跡と座標点を表示するかどうか。
	    </p>

	    <li><b>File(ファイル)</b></li>
	    <p class="lead">
	      CSVファイルの読込、書き出し用のボタン。"Open CSV File"は、CSVファイルを開く。"Save CSV File"は、修正した軌跡を出力し、保存する。
	    </p>
	    
	  </ol>
	</div>
      </div>
      <h3>動画を読み込む</h3>
      <p class="lead">
	読込たい動画を選択し、ドラッグ&ドロップでWindow内におとすと、読み込まれる。</p>
      <h3>トラッキング結果を読み込む</h3>
      <p class="lead">
	前の工程で出力したCSVファイルを、ドラッグ&ドロップでWindow内におとすと、軌跡が読み込まれる。</p>
      </p>
      <h3>ミストラッキングを修正する</h3>
      <p class="lead">修正すべきミスは、二つです。１つめは、座標点が飛んだ場合の修正。個体が通った座標から著しく離れた場所に座標点が表示される場合のこと。このミスの多くはフィルタ作成で減らせる。２つめは、スワッピングの修正。つまり、個体の座標点の色が切り替わる場合。2つ以上の個体が接近するとおきます。これはトラッキングアルゴリズムのミスによって起きるミス。</p>
      <h4>座標点の修正</h4>
      <div class="row">
	<div class="col-md-6">
	  <img src="../img/bt03/TrackingCorrector201512291925.png" alt="Error" width="100%">
	</div>
	<div class="col-md-6">
	  <p class="lead">
	    図内の赤い矢印の元の場所から赤い矢印で示された場所に紫色のポイント移動している。これは、赤い矢印の示された場所にノイズが残っていたために、別の場所に追跡個体が移動したとアルゴリズムが判定した場合の図である。この様に、座標点が飛んでいる場合、&#9312;の様に、ドラッグして、拡大範囲を決定すると、"拡大画面"の覧に画像と座標点が拡大表示される。&#9313;の水色の矢印の元の場所に有る点をドラッグして正確な個体の位置に修正することで、このミスは修正される。
	  </p>
	</div>
      </div>
      <h4>スワッピングの修正</h4>
      <p class="lead">
	2個体が極めて近い位置にくる場合、個体の追跡が切り替わることがある。言い替えれば、それまで、Aとなずけられていた個体がBになり、Bだった個体がAに切り替わる(Swapping of Identity)。
      </p>
      <div class="row">
	<div class="col-md-6">
	  <img src="../img/bt03/TrackingCorrector201512291936.png" alt="Error" width="100%">
	</div>
	<div class="col-md-6">
	  <p class="lead">
	    切り替わった個体の座標点を右クリックで選択する。二つ選択すると、Swappingボタンが表示される。このボタンをクリックすれば、切り替わりが修正できる。
	  </p>
	</div>
      </div>
      <h3>修正結果の再保存</h3>
      <p class="lead">修正したトラッキング結果を保存する。保存しなければ、修正は無意味になる。</p>
      <div class="row">
	<div class="col-md-6">
	  <img src="../img/bt03/TrackingCorrector201512292047.png" alt="Error" width="100%">
	</div>
	<div class="col-md-6">
	  <p class="lead">
	    "File -> Save CSV File"を選択すれば、これまで修正した結果が出力される。保存を行うディレクトリとファイル名をきめれば良い。
	  </p>
	</div>
      </div>
      <p class="lead">
	以上で、トラッキングが完了する。
      </p>
    </div>
    
    <footer class="footer">
      <div class="container">
        <p class="text-muted">@UMATracker</p>
      </div>
     </footer>

    <script type="text/javascript">
    </script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="../js/bootstrap.min.js"></script>
  </body>
</html>
